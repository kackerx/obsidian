# consumer
## ov

```ad-tips
消费模型

- 如果所有消费者都属于同一Group, 那么就是消息队列模型
- 如果实例分属不同的Group, 就是发布/订阅模型
```

## sumup

![[Pasted image 20221116162547.png|555]]
- 消费者是消费组的一部分, 按一个消费组订阅消费某个Topic, 一个组一个消费者, 消费4个分区

![[Pasted image 20221116162754.png|555]]
- 4个partition, 一个组, 两个消费者, 均分四个, 负载均衡

![[Pasted image 20221116162903.png|555]]
- 四个partition, 一个组, 四个消费者, 满负载运行

![[Pasted image 20221116163002.png|555]]
- 四个partition, 一个组, 五个消费者, 第五个是空闲的

## 提高消费能力

- consumer1开启多goro去并行处理, 但是这样offset提交顺序是个问题
- 多个消费者组都可以收到全量消息, 逻辑上消费者组属于不同应用, 但是如果消费能力不足, 考虑在消费者组里增加消费者

![[Pasted image 20221116163512.png|555]]