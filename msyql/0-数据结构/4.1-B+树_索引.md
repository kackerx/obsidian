# B+树 - 索引

![[Pasted image 20221108150140.png]]
## 每页

![[Pasted image 20221108151938.png|700]]
- 每个目录项页(非叶子节点)每条记录包含指向数据页的最小记录的主键值和页码
- 可以通过二分快速定位叶子, 在叶子页面内通过[[3-页目录]]二分快速定位记录

## 联合索引

![[Pasted image 20221108152954.png|700]]
- 为c2, c3建立联合索引, c2相等按c3排序

## 匹配顺序

### 全值匹配
a_b_c, where a = , b = , c = 可以无需, 会被优化

### 左列匹配
a_b_c, where b =, 用不到索引, 因为先按a匹配, a不等的情况下, b是无序的, 要么where a = , 要么where a = , b = , 索引顺序从左到右不能跳过

### 最左匹配原则
向右匹配遇到范围查询(>, <, between, like)停止匹配, 主要看范围查询后面的字段是无序的

### 匹配列前缀
As%可以, 字符串的比较是按字符逐个比较, %As不行

### 范围匹配
name > 'Asa' AND name < 'Barlow' AND birthday > '1980-01-01'; 只能用到name索引, 因为name不同, birthday是无序的

### 覆盖索引
不需要回表的查询, 查询的字段全部包含在索引之中

## 不适合索引

- 数据量少的, 
- 更新频繁的, 会频繁更改索引结构
- 离散度低的, 不能通过二分过滤大部分数据
