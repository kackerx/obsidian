{
	"nodes":[
		{"type":"text","text":"## 缓存雪崩\n\n```ad-tips\n大量请求redis无法处理从而覆盖到db层, 原因\n- 大量数据同时过期\n- redis实例故障, 无法处理\n```\n\n- 针对第一种情况, 随机设置过期时间不要同时失效, 或者服务降级, 减少db的压力\n- redis故障, 服务熔断, 请求限流, 集群, 负载均衡","id":"0131f317b27b7dc1","x":-640,"y":-400,"width":520,"height":360},
		{"type":"text","text":"## 缓存击穿\n\n```ad-tips\n经常发生于热点数据过期, 瞬间大量请求访问db, 击穿就是一个点, 热点\n```\n\n- 热点数据不设置过期时间\n- 集群应用实例本地缓存\n- 分布式锁, value+逻辑过期时间, 未过期直接返回逻辑过期数据, 过期抢锁查db更新缓存\n\n![[Pasted image 20230324144020.png]]","id":"d778eab9f0fa0dd6","x":-640,"y":0,"width":520,"height":600},
		{"type":"text","text":"## 缓存穿透\n\n```ad-tips\n穿透就是多层GG, 意味着db和缓存都没有查到\n```\n\n- 针对查询的数据, redis中缓存一个缺省值, 避免大量访问db\n- 布隆过滤器判断是否存在, 而避免查询db判断是否存在\n\n数据写入db后, 同时对过滤器写入标记\n查询缓存不存在后, 先通过过滤器判断是否存在, 存在再查db\n在redis和db之间, 加了一层布隆","id":"b0790d2a78070a99","x":-80,"y":-400,"width":580,"height":360},
		{"type":"file","file":"0-asset/Pasted image 20230324145316.png","id":"b3f9429159d2f720","x":-80,"y":0,"width":580,"height":253}
	],
	"edges":[]
}