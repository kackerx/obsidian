# 数据结构 #index 

## 底层结构
![[Pasted image 20230322164846.png|555]]

## redis自身键值对的结构 - 全局哈希表
![[Pasted image 20230322165038.png|555]]

## 哈希冲突的rehash
![[Pasted image 20230322181954.png|555]]
- redis默认有两个全局哈希表, 默认使用哈希表1, 2不分配, 当需要执行rehash时
- 1. 分配2倍大的哈希表2
- 2. 转移哈希表1的数据
- 3. 释放哈希表1
- 同时避免性能抖动问题, <mark class="hltr-pink">渐进式rehash</mark>, 和go一样, 每处理一个请求时把一个索引位的转移

## 压缩列表zl
![[Pasted image 20230322183844.png|555]]
- 表头有三个字段, 分别代表列表长度(多少个字节), 列表尾的偏移量, 列表的entity数 -> 可以快速定位到第一个和最后一个entity

## 跳表
![[Pasted image 20230322184055.png|555]]
- 像mysql一样建立多级索引