:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

![[Pasted image 20240104181326.png|666]]


::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20231213152918.png|666]]

![[Pasted image 20231213154645.png|666]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
## 网络插件介绍

:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2largest-column=firs}

![[Pasted image 20231213160204.png|777]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20231215111511.png|777]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::
## CNI网络模型 - Overlay

:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

1. 跨主机通信创建一个整个集群的「公用网桥」
2. 甚至不需要特殊网桥, 仅仅通过某种方式配置主机的「路由表」, 将数据包转发到正确的宿主机

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240111185121.png]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

## CNI网络模型 - Underlay

## CNI网络模型 - Host-GW

:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

1. host-gw模式工作原理是将每个子网的下一跳, 设置为该子网对应宿主机的ip地址`10.244.1.0/24 via 10.168.0.3 dev eth0`
2. 主机充当通信路径的网关
3. 该模式能正常工作的核心是, ip包封装成帧发送时, 会使用路由表的「下一跳via」设置目的MAC地址, 所以说host-gw模式要求集群宿主机之间二层必须联通
4. 

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240112115738.png]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

## Cilium eBPF

:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}



::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240104191156.png|777]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
