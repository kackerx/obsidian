## Host-gw BGP
:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

1. Felix是一个DaemonSet负责在宿主机上插入路由规则及维护Calico网络设备工作
2. Bird(BGP Client), 边界网关协议客户端用于负载在集群中分发路由规则信息
3. Calico将集群中的所有节点都当做边界路由器来处理, 组成一个全连通的网络, 互相之间通过BGP协议交换路由, 「BGP Peer」
4. 默认是「Node-to-Node Mesh」模式, 多于100节点集群网络压力大推荐使用「Route Reflector」模式, 专门几个节点负责交换集群路由信息

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240112141052.png]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
## IPIP

:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

~~~ad-tips
title:  

1. `10.233.2.0/24 via 192.168.2.2 tunl0`  这是一个ip tunnel设备
2. host-gw需要二层连通, 如果是跨局域网需要三层转发
3. ip包进入ip隧道设备后, 被linux内核的IPIP驱动接管将IP包封装在宿主机网络的IP包中
~~~

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240112142022.png]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::