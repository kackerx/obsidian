:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

~~~ad-primary
title: 场景

- 主动方完成事务后向被动方发送消息, 允许丢失
- 主动方需提供消息回查接口, 以便被动方恢复丢失的业务消息
- 业务被动方收到消息执行完业务后, 向主动方返回成功接收消息的状态, 避免其重试
- 主动方未收到被动方的确认消息时, 阶梯延时策略的重新发送
- 被动方的业务处理结果不影响主动方的结果
~~~

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::



::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
## ov

:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

~~~ad-bug
title: 流程

- 主动方处理完业务发送消息
- 消息中间件保存消息并『待发送』
- 消息消费服务订阅消息, 并发送确认消息
- 消息中间件收到发送者的确认消息, 『已发送』
- 消息消费者调用消息通知服务接口
- 消息通知服务向被动方发送通知消息, 通知记录入库
- 被动方没收到通知或者收到后处理失败, 需要再次获取通知则根据主动方提供的回查接口
~~~

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240701194503.png|666]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
