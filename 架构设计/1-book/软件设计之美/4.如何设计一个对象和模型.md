# 对象模型设计

> 首先考虑对象应该提供哪些行为, 根据行为设计方法, 最后考虑方法需要的字段

## 封装

- ==最小化接口暴露, 基于行为进行封装, 不要暴露细节==

## 继承

- 组合优于继承

## 多态

- 不要看对象是谁, 而是要看对象能提供什么样的==能力==, 
- 多态既是==抽象==, 不要看鸡就是鸡, 鸭就是鸭, ==寻找共同点==
- ==变==的部分和==不变==的部分, 隔离开来
- ==面向接口编程==

## 设计模型 关于DDD的设计和思想

### 角色 -> 实体(entity) & 值对象(valueObj)
- 实体: 唯一能标识出来的对象, 比如一个订单, 属性可变, 状态属性怎么变都还是那个k实体
- 值对象: 表示一个值, 如订单地址, 无法标识, 属性全部相同就是同一个值对象, 但是entity的话属性完全一个, id不同也是不同的实体

### 关系 -> 聚合 & 聚合根
- 聚合: 多个实体或者值对象的组合, 共同的生命周期, 如一个订单头和所属订单行, 是同一单元
- 聚合根: 访问聚合的起点, 订单为例, 订单头就是聚合根
![[Pasted image 20230305125706.png|555]]

### 互动 -> 工厂, 仓库, 领域服务&应用服务

- 领域服务: <mark class="hltr-pink">动词</mark>, 动词可以放在领域对象或者值对象上, 但是有些动作是不属于对象的, 如两个对象的转账的动作等, 其产生的结果是领域事件
- 工厂: 如创建对象的动作等
- 仓库: 对数据的crud的动作
- 应用服务: 业务无关的鉴权, 身份验证, 日志监控等

