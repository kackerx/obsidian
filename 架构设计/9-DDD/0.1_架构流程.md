:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

~~~ad-primary
title: 用户接口层 - handler

- adapter/handlers/rpc/order_handler.go: 面相外部用户或系统, 接收外部输入, 返回结果
- 轻量的, 不含业务逻辑, 简单的入参校验, 记录访问日志, 异常统一处理, 参数的转换和封装
~~~

~~~ad-grey
title: 应用层 - applicant

- 用户接口层的直接使用者, 不真正实现业务, 根据实际的UserCase来协调调用domain层提供的能力, 主要做编排工作
- 应用层负责事务, 数据的一致性
- **任务协调**：应用层负责处理多个领域服务的协调，确保业务流程按照既定顺序执行。
- **边界交互**：处理和维护与其他系统的数据交互，如API调用、用户界面输入等。
- **事务控制**：管理业务操作中的事务，确保数据的一致性和完整性。
- **安全和权限**：验证操作权限，确保安全性。
~~~

~~~ad-inf
title: 领域层 - domain

- **业务规则的实现**：领域层包含实现业务规则和业务逻辑的领域模型（实体、值对象、领域事件等）。
- **保持模型一致性**：确保领域模型的状态始终保持一致，不会因外部变化而受到影响。
- **封装**：领域层对业务规则进行封装，隐藏其复杂性，只通过领域服务或领域事件对外提供交互接口。
- **职责焦点**：应用层主要关注于“如何”完成业务操作（流程、协调、交互），而领域层关注于“什么”是业务规则和逻辑（规则的实现）。
- **知识范围**：应用层侧重于技术细节和外部通信，领域层则深入业务本身，实现业务的核心决策和计算。
- **数据操作**：应用层可能涉及数据传输对象（DTOs）和其他的数据映射工作，领域层处理的是由业务模型直接表示的数据。
~~~

~~~ad-danger
title: 基础设施层 - infra

基础设施层是在技术上具体的实现细节，它为上面各层提供通用的技术能力。
比如我们使用了哪种数据库，数据是怎么存储的，有没有用到缓存、消息队列等
~~~

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20240428141529.png|555]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

---
:::::::::::::::::::::::::::::::::::::::: {.columns shadow=off border=off col-count=2 largest-column=firs}

![[Pasted image 20240428144452.png|666]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

~~~ad-ex
title: 关于日志

- 接口层: 请求相关的日志, req, resp
- 应用层: 业务操作日志, withdraw, reject
- 领域层: 专注领域服务
~~~

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

