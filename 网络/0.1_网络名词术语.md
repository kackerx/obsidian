# 术语

:::::::::::::::::::::::::::::::::::::::: {.columns border=off col-count=2 largest-column=firs}

- 应用层 -> 传输层的消息超过MSS, 就会分段
- 每一层都可以称为「报文(packet)」

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20231127102559.png|555]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

---
## TCP Header
:::::::::::::::::::::::::::::::::::::::: {.columns border=off col-count=2 largest-column=firs}

- ACK: 确认序列号有效
- FIN: 释放一个连接
- PSH: 接收方应尽快将报文发送给应用层
- RST: 重置连接
- SYN: 发起新连接
- URG: 紧急指针有效
- ack = client.seq + 1, 而标志位中的ACK用来确认序号号有效

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::


![[Pasted image 20231127110549.png|777]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

---
## IP Header

:::::::::::::::::::::::::::::::::::::::: {.columns border=off col-count=2 largest-column=firs}

~~~ad-primary
title: 版本号

IP所使用的版本
~~~
~~~ad-grey
title: 首部长度

IP头的长度
~~~
~~~ad-success
title: 服务类型

优先级标志位和服务类型标志位, 被路由器用来进行流量的优先排序
~~~
~~~ad-warn
title: 总长度

IP头和数据包中数据的长度
~~~
~~~ad-danger
title: 标识符

唯一的标识数字, 用来识别一个数据包或者被分片数据包的次序
~~~
~~~ad-ex
title: 标识

标识一个数据包是否是一组分片数据包的一部分
~~~


::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20231205185120.png|777]]
~~~ad-inf
title: 存活时间

ttl, 经过路由器的跳数
~~~
~~~ad-note
title: 协议

识别数据包序列中, 上层协议数据包的类型
~~~
~~~ad-bug
title: 首部校验和

错误检测机制, 确认IP头的内容没有损坏和更改
~~~
~~~ad-tips
title: 余项

- 源IP & 目标IP
- 选项 & 实际数据
~~~


::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
## 三握四挥
:::::::::::::::::::::::::::::::::::::::: {.columns border=off col-count=2 largest-column=firs}

![[Pasted image 20240103144147.png|777]]

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::columnbreak
:::

![[Pasted image 20231130113734.png|777]]
- 当被动关闭方（上图的服务端）在 TCP 挥手过程中，「**没有数据要发送」并且「开启了 TCP 延迟确认机制（默认会开启）」，那么第二和第三次挥手就会合并传输，这样就出现了三次挥手。**
- 延迟确认机制: 没有data的响应的时候, ack报文会等待最长200ms再响应data+ack


::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
