# 三次握手

## 面试

&  为什么需要3次握手
- 确认双方收发能力

&  为什么要有time_wait状态, 为什么需要四次握手, 服务器出现大量close_wait
- 客户端向服务端发送FIN
- 服务端收到FIN后返回ACK
- 服务端向客户端发送FIN
- 客户端最后回复ACK
- TIME_WAIT状态是指, 客户端最后的ACK可能丢失, 超时后服务端会再次发送FIN, 客户端不知道服务端没收到ack已经关闭了连接就会有问题

- 大量的CLOSE_WAIT是程序出现问题, 对方的socket关闭了连接而我方没有及时的关闭, 检查代码特别是释放资源的代码, 或处理请求的线程配置

